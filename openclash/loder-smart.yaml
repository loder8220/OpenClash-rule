# è‡ªå·±æ‰‹æ“çš„é…ç½®æ–‡ä»¶ï¼Œå‚è€ƒï¼šhttps://wiki.metacubex.one/example/conf/

# é”šç‚¹
pr:
  &pr {
    type: select,
    proxies:
      [
        é»˜è®¤,
        æ™ºèƒ½é€‰æ‹©,
        é¦™æ¸¯æ™ºèƒ½,
        å°æ¹¾æ™ºèƒ½,
        æ—¥æœ¬æ™ºèƒ½,
        æ–°åŠ å¡æ™ºèƒ½,
        ç¾å›½æ™ºèƒ½,
        è‡ªåŠ¨é€‰æ‹©,
        é¦™æ¸¯è‡ªåŠ¨,
        å°æ¹¾è‡ªåŠ¨,
        æ—¥æœ¬è‡ªåŠ¨,
        æ–°åŠ å¡è‡ªåŠ¨,
        ç¾å›½è‡ªåŠ¨,
        è‹±å›½è‡ªåŠ¨,
        å¾·å›½è‡ªåŠ¨,
        åŠ æ‹¿å¤§è‡ªåŠ¨,
        å…¶å®ƒåœ°åŒº,
        å…¨éƒ¨èŠ‚ç‚¹,
        ç›´è¿,
      ],
  }
p:
  &p {
    type: http,
    interval: 3600,
    health-check:
      {
        enable: true,
        url: "https://www.gstatic.com/generate_204",
        interval: 300,
      },
  }
# url é‡Œå¡«å†™è‡ªå·±çš„è®¢é˜…,åç§°ä¸èƒ½é‡å¤
proxy-providers:
  hongxingyun:
    <<: *p
    url: "https://hongxingyun10.vip/hxyunvip?token=ee6df3a5a162aaa2d072c6b05177bf57"
  mojie:
    <<: *p
    url: "https://a.mjsub.org/api/v1/client/subscribe?token=c25f6ee7eda0c22e43e8021a2bd82dc0"
ipv6: true
allow-lan: true
mixed-port: 7890
external-controller: 127.0.0.1:9090
profile:
  store-selected: true
  store-fake-ip: true
dns:
  enable: true
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 28.0.0.1/8
  fake-ip-filter:
    - "*"
    - "+.lan"
    - "+.local"
  default-nameserver:
    - 223.5.5.5
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query

#ç›´è¿ï¼Œå›ºå®šå†™æ³•
proxies:
  - name: "ç›´è¿"
    type: direct
    udp: true

# èŠ‚ç‚¹ç»„
proxy-groups:
  - {
      name: é»˜è®¤,
      type: select,
      proxies:
        [
          æ™ºèƒ½é€‰æ‹©,
          è‡ªåŠ¨é€‰æ‹©,
          é¦™æ¸¯è‡ªåŠ¨,
          å°æ¹¾è‡ªåŠ¨,
          æ—¥æœ¬è‡ªåŠ¨,
          æ–°åŠ å¡è‡ªåŠ¨,
          ç¾å›½è‡ªåŠ¨,
          è‹±å›½è‡ªåŠ¨,
          å¾·å›½è‡ªåŠ¨,
          åŠ æ‹¿å¤§è‡ªåŠ¨,
          å…¶å®ƒåœ°åŒº,
          é¦™æ¸¯æ™ºèƒ½,
          å°æ¹¾æ™ºèƒ½,
          æ—¥æœ¬æ™ºèƒ½,
          æ–°åŠ å¡æ™ºèƒ½,
          ç¾å›½æ™ºèƒ½,
          å…¨éƒ¨èŠ‚ç‚¹,
          ç›´è¿,
        ],
    }
  - { name: Google, <<: *pr }
  - { name: Github, <<: *pr }
  - { name: YouTube, <<: *pr }
  - { name: Docker, <<: *pr }
  - { name: OpenAi, <<: *pr }
  - { name: TikTok, <<: *pr }
  - {
      name: å›½å†…,
      type: select,
      proxies:
        [
          ç›´è¿,
          é»˜è®¤,
          è‡ªåŠ¨é€‰æ‹©,
          é¦™æ¸¯è‡ªåŠ¨,
          å°æ¹¾è‡ªåŠ¨,
          æ—¥æœ¬è‡ªåŠ¨,
          æ–°åŠ å¡è‡ªåŠ¨,
          ç¾å›½è‡ªåŠ¨,
          è‹±å›½è‡ªåŠ¨,
          å¾·å›½è‡ªåŠ¨,
          åŠ æ‹¿å¤§è‡ªåŠ¨,
          å…¶å®ƒåœ°åŒº,
          é¦™æ¸¯æ™ºèƒ½,
          å°æ¹¾æ™ºèƒ½,
          æ—¥æœ¬æ™ºèƒ½,
          æ–°åŠ å¡æ™ºèƒ½,
          ç¾å›½æ™ºèƒ½,
          æ™ºèƒ½é€‰æ‹©,
          å…¨éƒ¨èŠ‚ç‚¹,
        ],
    }
  - {
      name: æ¼ç½‘ä¹‹é±¼,
      type: select,
      proxies:
        [
          ç›´è¿,
          é»˜è®¤,
          è‡ªåŠ¨é€‰æ‹©,
          é¦™æ¸¯è‡ªåŠ¨,
          å°æ¹¾è‡ªåŠ¨,
          æ—¥æœ¬è‡ªåŠ¨,
          æ–°åŠ å¡è‡ªåŠ¨,
          ç¾å›½è‡ªåŠ¨,
          è‹±å›½è‡ªåŠ¨,
          å¾·å›½è‡ªåŠ¨,
          åŠ æ‹¿å¤§è‡ªåŠ¨,
          å…¶å®ƒåœ°åŒº,
          é¦™æ¸¯æ™ºèƒ½,
          å°æ¹¾æ™ºèƒ½,
          æ—¥æœ¬æ™ºèƒ½,
          æ–°åŠ å¡æ™ºèƒ½,
          ç¾å›½æ™ºèƒ½,
          æ™ºèƒ½é€‰æ‹©,
          å…¨éƒ¨èŠ‚ç‚¹,
        ],
    }
    # ä¸‹é¢æ˜¯åœ°åŒºèŠ‚ç‚¹åˆ†ç»„
  - {
      name: è‡ªåŠ¨é€‰æ‹©,
      type: url-test,
      include-all: true,
      # æ’é™¤ç›´è¿ã€å®˜ç½‘ã€å‰©ä½™ã€å¼‚å¸¸ã€å¥—é¤
      filter: "(?i)^(?!.*(?:ç›´è¿|å®˜ç½‘|å‰©ä½™|å¼‚å¸¸|å¥—é¤|æµé‡)).*",
    }
  - {
      name: é¦™æ¸¯è‡ªåŠ¨,
      type: url-test,
      include-all: true,
      filter: "(?i)(?!ç›´è¿)(é¦™æ¸¯|hk|hongkong|hong kong)",
    }
  - {
      name: å°æ¹¾è‡ªåŠ¨,
      type: url-test,
      include-all: true,
      filter: "(?i)(?!ç›´è¿)(å°æ¹¾|tw|taiwan)",
    }
  - {
      name: æ—¥æœ¬è‡ªåŠ¨,
      type: url-test,
      include-all: true,
      filter: "(?i)(?!ç›´è¿)(æ—¥æœ¬|jp|japan)",
    }
  - {
      name: æ–°åŠ å¡è‡ªåŠ¨,
      type: url-test,
      include-all: true,
      filter: "(?i)(æ–°åŠ å¡|sg|singapore)",
    }
  - {
      name: ç¾å›½è‡ªåŠ¨,
      type: url-test,
      include-all: true,
      filter: "(?i)(?!ç›´è¿)(ç¾å›½|us|unitedstates|united states)",
    }
  - {
      name: è‹±å›½è‡ªåŠ¨,
      type: url-test,
      include-all: true,
      filter: "(?i)(è‹±å›½|gb|united kingdom)",
    }
  - {
      name: å¾·å›½è‡ªåŠ¨,
      type: url-test,
      include-all: true,
      filter: "(?i)(å¾·å›½|de|germany)",
    }
  - {
      name: åŠ æ‹¿å¤§è‡ªåŠ¨,
      type: url-test,
      include-all: true,
      filter: "(?i)(åŠ æ‹¿å¤§|ca|canada)",
    }
  - {
      name: å…¶å®ƒåœ°åŒº,
      type: select,
      include-all: true,
      filter: "(?i)^(?!.*(?:ğŸ‡­ğŸ‡°|ğŸ‡¯ğŸ‡µ|ğŸ‡ºğŸ‡¸|ğŸ‡¸ğŸ‡¬|ğŸ‡¨ğŸ‡³|æ¸¯|hk|hongkong|å°|tw|taiwan|æ—¥|jp|japan|æ–°|sg|singapore|ç¾|us|unitedstates|åŠ æ‹¿å¤§|ca|canada|å¾·å›½|de|germany|è‹±å›½|gb|united kingdom|ç›´è¿|å®˜ç½‘|å‰©ä½™|å¼‚å¸¸|å¥—é¤|æµé‡)).*",
    }
  - {
      name: é¦™æ¸¯æ™ºèƒ½,
      type: smart,
      uselightgbm: true,
      collectdata: false,
      include-all: true,
      interval: 300,
      filter: "(?i)(?!ç›´è¿)(é¦™æ¸¯|hk|hongkong|hong kong)",
    }
  - {
      name: å°æ¹¾æ™ºèƒ½,
      type: smart,
      uselightgbm: true,
      collectdata: false,
      include-all: true,
      interval: 300,
      filter: "(?i)(?!ç›´è¿)(å°æ¹¾|tw|taiwan)",
    }
  - {
      name: æ—¥æœ¬æ™ºèƒ½,
      type: smart,
      uselightgbm: true,
      collectdata: false,
      include-all: true,
      interval: 300,
      filter: "(?i)(?!ç›´è¿)(æ—¥æœ¬|jp|japan)",
    }
  - {
      name: æ–°åŠ å¡æ™ºèƒ½,
      type: smart,
      uselightgbm: true,
      collectdata: false,
      include-all: true,
      interval: 300,
      filter: "(?i)(æ–°åŠ å¡|sg|singapore)",
    }
  - {
      name: ç¾å›½æ™ºèƒ½,
      type: smart,
      uselightgbm: true,
      collectdata: false,
      include-all: true,
      interval: 300,
      filter: "(?i)(?!ç›´è¿)(ç¾å›½|us|unitedstates|united states)",
    }
  - {
      name: æ™ºèƒ½é€‰æ‹©,
      type: smart,
      uselightgbm: true,
      collectdata: false,
      include-all: true,
      interval: 300,
      filter: "(?i)^(?!.*(?:ç›´è¿|å®˜ç½‘|å‰©ä½™|å¼‚å¸¸|å¥—é¤|æµé‡)).*",
    }

  - { name: å…¨éƒ¨èŠ‚ç‚¹, type: select, include-all: true }

#åŸŸåç»„
rule-anchor:
  ip: &ip { type: http, interval: 86400, behavior: ipcidr, format: text }
  domain:
    &domain { type: http, interval: 86400, behavior: domain, format: text }
rule-providers:
  # å›½å†…åŸŸå
  cn_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.list"
    # å›½å†…IP
  cn_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.list"
  # google åŸŸå
  google_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.list"
  # google IP
  google_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.list"
  #docker åŸŸå
  docker_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/docker.list"
  #github åŸŸå
  github_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.list"
  #openai åŸŸå
  openai_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/openai.list"
  #youtube åŸŸå
  youtube_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.list"
  #tiktok åŸŸå
  tiktok_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.list"
  gwf_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/gfw.list"

rules:
  - GEOIP,lan,ç›´è¿,no-resolve
  - RULE-SET,youtube_domain,YouTube
  - RULE-SET,docker_domain,Docker
  - RULE-SET,github_domain,Github
  - RULE-SET,openai_domain,OpenAi
  - RULE-SET,tiktok_domain,TikTok
  - RULE-SET,google_domain,Google
  - RULE-SET,google_ip,Google
  - RULE-SET,gwf_domain,é»˜è®¤
  - RULE-SET,cn_domain,å›½å†…
  - RULE-SET,cn_ip,å›½å†…
  - MATCH,æ¼ç½‘ä¹‹é±¼
